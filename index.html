// Define global variables
const SUBJECTS = ["Math", "Eng", "Comp"];  // Example subjects
const STUDYPLAN = [];
const DAYS = 30;
const PREFLEN = 1.5; // Length of each study session in hours
const breaklen = 0.5; // Length of break in hours
let STUDYTIME = 'M'; // 'M' for Morning, 'A' for Afternoon, 'E' for Evening

// Function to convert decimal time to HH:MM format
function formatTime(decimalTime) {
    let hours = Math.floor(decimalTime);
    let minutes = Math.round((decimalTime - hours) * 60);
    if (minutes === 60) {
        hours += 1;
        minutes = 0;
    }
    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
}

// Generate a study plan for 30 days
function genStudyPlan() {
    for (let k = 0; k < DAYS; k++) {
        STUDYPLAN[k] = [];
        let hours_left = 4; // Example hours per day
        let session_start_time = 8; // Example start time 08:00 in 24-hour format
        let slot_index = 0;

        // Assign subjects per day
        for (let i = 0; i < SUBJECTS.length; i++) {
            if (hours_left <= 0) break;

            // Calculate end time for session
            let session_end_time = session_start_time + PREFLEN;
            let formatted_start = formatTime(session_start_time);
            let formatted_end = formatTime(session_end_time);

            // Fill the study plan with formatted times
            STUDYPLAN[k][slot_index] = `Study ${SUBJECTS[i]} from ${formatted_start} to ${formatted_end}`;
            hours_left -= PREFLEN;

            // Adjust the start time
            session_start_time = session_end_time + breaklen;

            // Move to next slot if necessary (adjusting for different study times)
            if (session_start_time >= 12 && STUDYTIME === 'M') {
                slot_index = 1;
                session_start_time = 16; // Afternoon starts at 16:00
            } else if (session_start_time >= 19 && STUDYTIME === 'A') {
                slot_index = 2;
                session_start_time = 18; // Evening starts at 18:00
            } else if (session_start_time >= 22 && STUDYTIME === 'E') {
                break; // End day if we hit the evening end time
            }
        }
    }
}

// Function to display the study plan
function displayStudyPlan() {
    let output = "<h2>Output:</h2><ul>";
    for (let day = 0; day < STUDYPLAN.length; day++) {
        output += `<li>Day ${day + 1}: `;
        output += STUDYPLAN[day].join(", ");
        output += `</li>`;
    }
    output += "</ul>";
    document.getElementById("output").innerHTML = output;
}

// Run the functions
document.addEventListener("DOMContentLoaded", function () {
    genStudyPlan();  // Generate the plan
    displayStudyPlan();  // Display it
});
